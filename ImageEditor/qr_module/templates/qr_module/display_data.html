{% extends 'base.html' %}
{% load static %}

{% block body %}
<div class="success-container">
    <div class="success-cover">
        <h1 id="heading1">Your QR Code Has Been Processed Successfully!</h1>

        <!-- Displaying the uploaded QR Code -->
        <div class="image-container text-center">
            <img src="{{ url }}" alt="Uploaded QR Code" class="img-fluid" />
        </div>

        <!-- Displaying the QR code data -->
        <div class="data-container text-center">
            <textarea id="qr-data-box" class="form-control" rows="5" readonly>{{ data }}</textarea>
            <button type="button" id="copy-button" class="btn btn-primary mt-3">Copy QR Code Data</button>
        </div>

        <!-- Button for generating another QR code -->
        <div class="text-center mt-4">
            <a href="{% url 'qr_module:generate_qr' %}" class="btn btn-secondary">Generate Another QR Code</a>
        </div>
    </div>
</div>

<script>
    // JavaScript to copy QR code data to clipboard
    document.getElementById('copy-button').addEventListener('click', function() {
        const qrDataBox = document.getElementById('qr-data-box');
        qrDataBox.select();
        qrDataBox.setSelectionRange(0, 99999); // For mobile devices
        document.execCommand('copy');
        alert('QR Code data copied to clipboard!');
    });
</script>
{% endblock body %}
